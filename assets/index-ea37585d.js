var x=Object.defineProperty;var L=(a,e,t)=>e in a?x(a,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[e]=t;var C=(a,e,t)=>(L(a,typeof e!="symbol"?e+"":e,t),t);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))s(n);new MutationObserver(n=>{for(const r of n)if(r.type==="childList")for(const l of r.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&s(l)}).observe(document,{childList:!0,subtree:!0});function t(n){const r={};return n.integrity&&(r.integrity=n.integrity),n.referrerPolicy&&(r.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?r.credentials="include":n.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function s(n){if(n.ep)return;n.ep=!0;const r=t(n);fetch(n.href,r)}})();class i{constructor(e){this.element=null,this.createElement(e)}createElement(e){this.element=document.createElement(e.tag),this.setClasses(e.classNames),this.setTextContent(e.textContent),this.setCallback(e.callback),this.setAttribute(e.attribute)}getElement(){return this.element}setClasses(e){e.forEach(t=>this.element.classList.add(t))}setTextContent(e){this.element.textContent=e}setCallback(e){e&&e.length>0&&e.forEach(t=>this.element.addEventListener(t.event,s=>t.callback(s)))}setAttribute(e){e&&e.forEach(t=>this.element.setAttribute(t.id,t.value))}}class o{constructor(e){this.elementCreator=this.createView(e)}getHtmlElement(){return this.elementCreator.getElement()}createView(e){const t={tag:e.tag,classNames:e.classNames,textContent:e.textContent,callback:e.callback,attribute:e.attribute};return new i(t)}}const k=""+new URL("rs_school-f5e70645.svg",import.meta.url).href;class S extends o{constructor(){const e={tag:"div",classNames:["footer__school"]};super(e),this.configureView()}configureView(){const e={tag:"a",classNames:["footer__link"],attribute:[{id:"href",value:"https://rs.school/"},{id:"target",value:"_blank"}]},t={tag:"img",classNames:["footer__img"],attribute:[{id:"src",value:`${k}`},{id:"fill",value:"red"}]},s=new i(e).getElement();s.append(new i(t).getElement()),this.elementCreator.getElement().append(s)}}const V=""+new URL("github-2d49405e.svg",import.meta.url).href;class y extends o{constructor(){const e={tag:"div",classNames:["footer__profile"]};super(e),this.configureView()}configureView(){const e={tag:"a",classNames:["footer__profile-link"],attribute:[{id:"href",value:"https://github.com/webjsmaster"},{id:"target",value:"_blank"}]},t={tag:"img",classNames:["footer__img"],attribute:[{id:"src",value:V},{id:"fill",value:"red"}]},s=new i(e).getElement();s.append(new i(t).getElement()),this.elementCreator.getElement().append(s)}}class I extends o{constructor(){super({tag:"div",classNames:["footer__year"],textContent:"2023"})}}let R=class extends o{constructor(){const e={tag:"div",classNames:["footer__container"]};super(e),this.configureView()}configureView(){this.elementCreator.getElement().append(new S().getHtmlElement(),new I().getHtmlElement(),new y().getHtmlElement())}};class H extends o{constructor(){const e={tag:"footer",classNames:["footer"]};super(e),this.configureView()}configureView(){this.elementCreator.getElement().append(new R().getHtmlElement())}}class m extends o{constructor(){const e={tag:"div",classNames:["header__count"]};if(super(e),m.exists)return m.instance;m.instance=this,m.exists=!0,this.configureView(),this.currentCount=0}configureView(){const e=this.elementCreator.getElement();e.textContent="Count: ",this.count=new i({tag:"span",classNames:[],textContent:"0"}),e.append(this.count.getElement())}rerender(){this.count.getElement().textContent=this.currentCount}incrementCount(e){this.currentCount+=e,this.rerender()}resetCount(){this.currentCount=0,this.rerender()}decrementCount(e){this.currentCount-=e,this.rerender()}getCount(){return this.currentCount}}class G extends o{constructor(){const e={tag:"div",classNames:["modal__content"]};super(e),this.configureView(),this.modal=new c}configureView(){const e=this.elementCreator.getElement();this.wrapperBtn=new i({tag:"div",classNames:["modal__wrapper-btn"]}).getElement();const t=new i({tag:"button",classNames:["modal__cls-btn"],callback:[{event:"click",callback:()=>this.handleClick()}],textContent:"Close"});this.wrapperBtn.append(t.getElement()),e.append(this.wrapperBtn)}handleClick(){this.modal.setStatus(!this.modal.getStatus())}setContent(e){this.removeContent();const t=new i({tag:"div",textContent:e,classNames:["modal__message"]});this.elementCreator.getElement().prepend(t.getElement())}setResult(e){this.removeContent();const t=new i({tag:"li",classNames:["modal__list-item"]}).getElement(),s=new i({tag:"div",classNames:["modal__item"],textContent:"N/n"}).getElement(),n=new i({tag:"div",classNames:["modal__item-date"],textContent:"Date"}).getElement(),r=new i({tag:"div",classNames:["modal__item"],textContent:"Score"}).getElement(),l=new i({tag:"div",classNames:["modal__item"],textContent:"Time"}).getElement();t.append(s,n,r,l);const h=new i({tag:"ul",classNames:["modal__result-list"]}).getElement();h.append(t),e.length&&e.map((N,_)=>h.append(this.createItemList(N,_))),this.elementCreator.getElement().prepend(h)}createItemList(e,t){const s=new i({tag:"li",classNames:["modal__list-item",e.score==="LOSS"?"loss":"win"]}).getElement(),n=new i({tag:"div",classNames:["modal__item"],textContent:`${t+1}.`}).getElement(),r=new i({tag:"div",classNames:["modal__item-date"],textContent:e.dateToday}).getElement(),l=new i({tag:"div",classNames:["modal__item"],textContent:e.score}).getElement(),h=new i({tag:"div",classNames:["modal__item"],textContent:e.time}).getElement();return s.append(n,r,l,h),s}setNewGame(e){this.removeContent();const t=new i({tag:"div",textContent:"If you start a new game you will be counted as a loss, should you start?",classNames:["modal__message"]}),s=new i({tag:"button",classNames:["modal__ok-btn"],textContent:"Ok",callback:[{event:"click",callback:()=>this.handleClickOk(e)}]});this.wrapperBtn.append(s.getElement()),this.elementCreator.getElement().prepend(t.getElement())}handleClickOk(e){e(),this.modal.setStatus(!1)}removeContent(){const e=this.elementCreator.getElement().querySelector(".modal__result-list"),t=this.elementCreator.getElement().querySelector(".modal__ok-btn"),s=this.elementCreator.getElement().querySelector(".modal__message");this.elementCreator.getElement().contains(e)&&this.elementCreator.getElement().removeChild(e),this.wrapperBtn.contains(t)&&this.wrapperBtn.removeChild(t),this.elementCreator.getElement().contains(s)&&this.elementCreator.getElement().removeChild(s)}}class c extends o{constructor(){const e={tag:"div",classNames:["modal"]};if(super(e),c.exists)return c.instance;c.instance=this,c.exists=!0,this.show=!1,this.configureView()}configureView(){const e=this.elementCreator.getElement();this.content=new G,e.append(this.content.getHtmlElement())}render(){const e=this.elementCreator.getElement(),t=document.querySelector(".wrapper");this.getStatus()?(t.classList.add("show-modal"),e.classList.add("active")):(t.classList.add("close"),e.classList.add("close"),setTimeout(()=>{t.classList.remove("show-modal"),e.classList.remove("active"),t.classList.remove("close"),e.classList.remove("close")},300))}setStatus(e){this.show=e,this.render()}getStatus(){return this.show}showModal(e,t){e==="message"?this.content.setContent(t):e==="showResult"?this.content.setResult(t):e==="newGame"&&this.content.setNewGame(t),this.setStatus(!0)}}class u extends o{constructor(){const e={tag:"div",classNames:["header__timer"]};if(super(e),u.exists)return u.instance;u.instance=this,u.exists=!0,this.modal=new c,this.configureView()}configureView(){const e=this.elementCreator.getElement();e.textContent="Time: ",this.timer=new i({tag:"span",classNames:[],textContent:"00:00.0"}),e.append(this.timer.getElement())}setTextTime(e){this.timer.getElement().textContent=`${e}`}}const T=a=>{const e=[];for(;e.length<a;){const t=Math.floor(Math.random()*a/2)+1,s=e.reduce((n,r)=>(n[r]=(n[r]||0)+1,n),{});(!s[t]||s[t]<2)&&e.push(t)}return e};const $=""+new URL("questions1-d07a5a68.png",import.meta.url).href;class g{constructor(){if(g.exists)return g.instance;g.instance=this,g.exists=!0,this.time=0,this.timeElement=new u}start(){this.timer||(this.timer=setInterval(()=>{this.time+=1,this.timeElement.setTextTime(this.msToTime(this.time))},100))}msToTime(e){const t=Math.floor(e%10);let s=Math.floor(e/10%60),n=Math.floor(e/(10*60)%60);return n=n<10?`0${n}`:n,s=s<10?`0${s}`:s,`${n}:${s}.${t}`}stop(){clearInterval(this.timer)}resetTimer(){this.time=0,this.timer=null}getTime(){return this.msToTime(this.time)}}class p{constructor(){C(this,"_currentId",null);if(p.exists)return p.instance;p.instance=this,p.exists=!0}get currentId(){return this._currentId}set currentId(e){this._currentId=e}}const O=""+new URL("1-c9c9a289.png",import.meta.url).href,U=""+new URL("2-c49146d3.png",import.meta.url).href,q=""+new URL("3-4fae2a9f.png",import.meta.url).href,B=""+new URL("4-d9a2528c.png",import.meta.url).href,A=""+new URL("5-da34bc30.png",import.meta.url).href,P=""+new URL("6-079839ff.png",import.meta.url).href,M=""+new URL("7-f00c9bdb.png",import.meta.url).href,W=""+new URL("8-e8d8b629.png",import.meta.url).href,j=""+new URL("9-4c635a4f.png",import.meta.url).href,F=""+new URL("10-8b9e79de.png",import.meta.url).href,J=""+new URL("11-6f607798.png",import.meta.url).href,Y=""+new URL("12-67b16cb7.png",import.meta.url).href,D=""+new URL("13-c312c6c8.png",import.meta.url).href,K=""+new URL("14-e11f9eff.png",import.meta.url).href,z=[{id:1,img:O},{id:2,img:U},{id:3,img:q},{id:4,img:B},{id:5,img:A},{id:6,img:P},{id:7,img:M},{id:8,img:W},{id:9,img:j},{id:10,img:F},{id:11,img:J},{id:12,img:Y},{id:13,img:D},{id:14,img:K}],w="webjsgame";function Q(){const a=new Date,e=String(a.getDate()).padStart(2,"0"),t=String(a.getMonth()+1).padStart(2,"0"),s=a.getFullYear(),n=a.toLocaleTimeString("ru-RU");return`${t}/${e}/${s} - ${n}`}function b({dateToday:a=Q(),score:e,time:t}){const s={dateToday:a,score:e,time:t};if(localStorage.getItem(w)){const n=JSON.parse(localStorage.getItem(w));n.length>9&&n.shift();const r=[...n,s];localStorage.setItem(w,JSON.stringify(r))}else localStorage.setItem(w,JSON.stringify([s]))}class d{constructor(){C(this,"_statusGame",!1);if(d.exists)return d.instance;d.instance=this,d.exists=!0}get statusGame(){return this._statusGame}set statusGame(e){this._statusGame=e}}class X extends o{constructor(e){const t={tag:"div",classNames:["main__item"],attribute:[{id:"id",value:e.id}],callback:[{event:"click",callback:s=>{s.stopPropagation(),this.handlerClick(s.target.id)}}]};super(t),this.count=new m,this.modal=new c,this.current=new p,this.statusGame=new d,this.timerInstance=new g,this.configureView(e)}configureView({img:e,id:t}){const s=this.elementCreator.getElement(),n=new i({tag:"div",classNames:["main__image-front"]}).getElement(),r=new i({tag:"div",classNames:["main__image-back"]}).getElement(),l=new i({tag:"img",classNames:["main__image"],attribute:[{id:"src",value:e},{id:"id",value:t}]}).getElement(),h=new i({tag:"img",classNames:["main__image"],attribute:[{id:"src",value:$},{id:"id",value:t}]}).getElement();n.append(l),r.append(h),s.append(n,r)}handlerClick(e){this.timerInstance.start(),this.statusGame.statusGame||(this.statusGame.statusGame=!0);const t=document.querySelectorAll(".main__item"),s=document.querySelector(".main__container");this.current.currentId?(s.classList.add("event"),t.forEach(n=>{n.id===e&&n.classList.contains("active")?(t.forEach(r=>{r.id===e&&r.classList.add("ended")}),this.count.incrementCount(11)):setTimeout(()=>{n.classList.remove("active"),s.classList.remove("event")},1e3)}),this.elementCreator.getElement().classList.add("active"),this.count.decrementCount(3),this.current.currentId=null):(this.elementCreator.getElement().classList.add("active"),this.current.currentId=e),this.checkWin(t)&&(this.timerInstance.stop(),this.statusGame.statusGame=!1,b({time:this.timerInstance.getTime(),score:this.count.getCount()}),this.modal.showModal("message",`You won by score: ${this.count.getCount()} and in time: ${this.timerInstance.getTime()} ms`))}checkWin(e){let t=0;return e.forEach(s=>{s.classList.contains("ended")&&(t+=1)}),t===28}}let E=class extends o{constructor(){const e={tag:"div",classNames:["main__container"]};super(e),this.configureView()}configureView(){const e=this.elementCreator.getElement();T(28).forEach(t=>{const s=z.find(n=>n.id===t);e.append(new X(s).getHtmlElement())})}};let v=class extends o{constructor(){const e={tag:"div",classNames:["main__button"]};super(e),this.configureView(),this.modal=new c}configureView(){const e=new i({tag:"button",classNames:[],textContent:"Show Results",callback:[{event:"click",callback:()=>this.handleClick()}]}).getElement();this.elementCreator.getElement().append(e)}handleClick(){const e=JSON.parse(localStorage.getItem(w));e&&e.length?this.modal.showModal("showResult",e):this.modal.showModal("message","No games have been played yet")}};class f extends o{constructor(){const e={tag:"main",classNames:["main"]};if(super(e),f.exists)return f.instance;f.instance=this,f.exists=!0,this.configureView()}configureView(){this.elementCreator.getElement().append(new E().getHtmlElement(),new v().getHtmlElement())}newGameRender(){const e=this.elementCreator.getElement();e.replaceChildren(),e.append(new E().getHtmlElement(),new v().getHtmlElement())}}class Z extends o{constructor(){const e={tag:"div",classNames:["header__button"]};super(e),this.configureView(),this.modal=new c,this.statusGame=new d}configureView(){const e=new i({tag:"button",classNames:[],textContent:"New game",callback:[{event:"click",callback:()=>this.handleClick()}]}).getElement();this.elementCreator.getElement().append(e)}handleClick(){this.statusGame.statusGame?this.modal.showModal("newGame",this.setLossLocalStorage.bind(this)):this.setNewGame()}setLossLocalStorage(){b({time:"LOSS",score:"LOSS"}),this.setNewGame()}setNewGame(){new f().newGameRender(),new g().stop(),new g().resetTimer(),new m().resetCount(),new p().currentId=null,new u().setTextTime("00:00.0"),new d().statusGame=!1}}class ee extends o{constructor(){const e={tag:"div",classNames:["header__container"]};super(e),this.configureView()}configureView(){this.elementCreator.getElement().append(new m().getHtmlElement(),new Z().getHtmlElement(),new u().getHtmlElement())}}class te extends o{constructor(){const e={tag:"header",classNames:["header"]};super(e),this.configureView()}configureView(){this.elementCreator.getElement().append(new ee().getHtmlElement())}}class se extends o{constructor(){const e={tag:"div",classNames:["wrapper"]};super(e),this.configureView()}configureView(){this.elementCreator.getElement().append(new te().getHtmlElement(),new f().getHtmlElement(),new H().getHtmlElement())}}class ne{constructor(){this.body=document.querySelector("#app"),this.createHtmlElement()}createHtmlElement(){const e=new se,t=new c;this.body.append(e.getHtmlElement(),t.getHtmlElement())}}new ne;
